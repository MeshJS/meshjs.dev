---
title: "Resolve Node-Specific Imports Errors"
icon: "guides/node-specific-imports.png"
---
import Link from "fumadocs-core/link";

Resolve Node-Specific Imports Errors (e.g., Buffer, TextEncoder) in Browser-Based Projects.

Web-based projects (React, Vue, Svelte, Angular) may encounter errors like:

```bash
Uncaught ReferenceError: Buffer is not defined
```

or

```bash
Module not found: Can't resolve 'buffer'
```

or

```bash
ReferenceError: TextEncoder is not defined
```

These errors occur when code relies on Node.js-specific modules unavailable in browsers. Common examples:

- `Buffer`
- `TextEncoder` / `TextDecoder`
- `crypto`
- `process`
- Nodeâ€™s built-in modules (`fs`, `path`, `stream`)

Modern bundlers (Webpack 5, Vite, Next.js) do **not** automatically include Node polyfills. Use these guidelines to fix errors.

## 1. General Concepts [!toc]

1. **Polyfill**: Implements missing functionality (e.g., `buffer` package).
2. **Fallback configuration**: Replaces Node modules with browser-friendly versions.
3. **npm dependencies**: Install equivalents:

```tsx
npm install buffer process stream-browserify crypto-browserify --save
```

4. **ES Modules vs CommonJS**: Ensure imports match bundler expectations.

## 2. Webpack [!toc]

### 2.1 Webpack 5 and Above [!toc]

Webpack 5 excludes Node polyfills. Two approaches exist:

**Approach A: Use NodePolyfillPlugin**

Install the plugin:

```tsx
npm install node-polyfill-webpack-plugin --save-dev
```

Add to `webpack.config.js`:

```tsx
const NodePolyfillPlugin = require('node-polyfill-webpack-plugin');

module.exports = {
  // ...your existing config
  plugins: [
    new NodePolyfillPlugin(),
    // ...other plugins
  ],
};
```

This plugin injects common polyfills.

**Approach B: Use `resolve.fallback`**

For granular control, configure fallbacks manually:

Install polyfills:

```tsx
npm install buffer process stream-browserify --save
```

Edit `webpack.config.js`:

```tsx
module.exports = {
  // ...
  resolve: {
    fallback: {
      buffer: require.resolve('buffer/'),  // or 'buffer'
      process: require.resolve('process/browser'),
      stream: require.resolve('stream-browserify'),
      // ...add more if needed
    },
  },
};
```

Import polyfills if needed:

```tsx
import { Buffer } from 'buffer';
global.Buffer = global.Buffer || Buffer;
```

## 3. Vite

Vite uses <Link href="https://rollupjs.org/">Rollup</Link>, which lacks automatic Node polyfills. Use a Rollup plugin.

Install the plugin:

```tsx
npm install rollup-plugin-polyfill-node --save-dev
```

Add to `vite.config.js`:

```tsx
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue' // or react, svelte, etc.
import rollupNodePolyFill from 'rollup-plugin-polyfill-node'

export default defineConfig({
  plugins: [
    vue(),
    // any other plugins
  ],
  build: {
    rollupOptions: {
      plugins: [
        rollupNodePolyFill()
      ],
    },
  },
  resolve: {
    alias: {
      // Optionally, if you want the polyfill for `buffer` and `process` as top-level
      buffer: 'rollup-plugin-polyfill-node/polyfills/buffer-es6',
      process: 'rollup-plugin-polyfill-node/polyfills/process-es6',
      // Add more if needed
    },
  },
})
```

Use the polyfilled global if necessary:

```tsx
import { Buffer } from 'buffer';
globalThis.Buffer = globalThis.Buffer || Buffer;
```

## 4. Next.js

Next.js uses Webpack. Use `node-polyfill-webpack-plugin` or configure `resolve.fallback`.

Example with `node-polyfill-webpack-plugin`:

```tsx
// next.config.js
const NodePolyfillPlugin = require('node-polyfill-webpack-plugin')

module.exports = {
  webpack: (config, { isServer }) => {
    if (!isServer) {
      config.plugins.push(new NodePolyfillPlugin())
    }
    return config
  },
}
```

Node modules like `Buffer` or `process` are now polyfilled.

## 5. Create React App (CRA)

Create React App **v5** uses Webpack 5. Use `react-app-rewired` or `craco` to override config.

### 5.1 Example with craco [!toc]

Install craco:

```tsx
npm install @craco/craco --save-dev
```

Update `package.json` scripts:

```tsx
{
  "scripts": {
    "start": "craco start",
    "build": "craco build",
    "test": "craco test"
  }
}
```

Create `craco.config.js`:

```tsx
const NodePolyfillPlugin = require('node-polyfill-webpack-plugin');

module.exports = {
  webpack: {
    plugins: {
      add: [
        new NodePolyfillPlugin()
      ],
    },
    configure: (webpackConfig) => {
      // Optionally, if you want to set fallback manually:
      webpackConfig.resolve.fallback = {
        ...webpackConfig.resolve.fallback,
        buffer: require.resolve('buffer'),
        process: require.resolve('process/browser'),
      }
      return webpackConfig;
    }
  },
};
```

Use polyfills:

```tsx
import { Buffer } from 'buffer';
global.Buffer = global.Buffer || Buffer;
```

## 6. Angular

Angular CLI uses Webpack. Polyfill Node modules:

Install polyfills:

```tsx
npm install buffer process stream-browserify --save
```

Edit `angular.json` or use `ngx-build-plus`.

Example with `ngx-build-plus`:

```tsx
npm install ngx-build-plus --save-dev
```

In `angular.json`:

```tsx
{
  "projects": {
    "my-app": {
      "architect": {
        "build": {
          "builder": "ngx-build-plus:browser",
          "options": {
            // ...
          },
          "configurations": {
            "production": {
              // ...
            }
          }
        },
        "serve": {
          "builder": "ngx-build-plus:dev-server",
          "options": {
            // ...
          }
        }
      }
    }
  }
}
```

Create or update `webpack.config.js`:

```tsx
const NodePolyfillPlugin = require('node-polyfill-webpack-plugin');

module.exports = {
  plugins: [
    new NodePolyfillPlugin(),
  ],
  resolve: {
    fallback: {
      buffer: require.resolve('buffer'),
      process: require.resolve('process/browser'),
      // ...
    },
  },
};
```

Run Angular commands via `ng build --extra-webpack-config webpack.config.js --output-hashing=none`.

## 7. Svelte

SvelteKit uses Vite or Rollup. Use Vite instructions (Section 3) or add the plugin to Rollup config:

```tsx
// rollup.config.js
import nodePolyfills from 'rollup-plugin-polyfill-node'

export default {
  plugins: [
    nodePolyfills(),
    // ...
  ],
  // ...
}
```